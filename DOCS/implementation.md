# Implementation Documentation

This document provides a comprehensive explanation of the architecture and implementation details of the website. It is a technical document that covers all aspects of the project, including the build process, available pages, data structures, and core functionality workflows. The goal is to provide a clear and detailed understanding of how the website is constructed and operates.

## Building the Project

The project is built using **Gulp.js**, a task runner that automates various development tasks. The build process is straightforward and involves compiling and packaging the necessary components to make the application functional for end-users.

### Key Components to Build

1. **SASS**: SASS (Syntactically Awesome Style Sheets) is a CSS preprocessor that must be compiled into standard CSS for the browser to execute.
2. **TypeScript**: TypeScript is a typed superset of JavaScript that must be transpiled into plain JavaScript for the browser to execute.

### Project File System

The project's file system is dynamically structured. The `public/` directory contains several subdirectories (excluding `assets/`), each representing a web page. Inside each subdirectory, there is an `index.php` file. When the project is built, two files named `main.js` and `main.css` are generated in each directory, alongside the `index.php` file. These files contain the JavaScript and CSS specific to that particular page.

#### Dynamic File System for TypeScript

The `scripts/` directory contains TypeScript files. Each subdirectory (except for `modules/`) has a `main.ts` file, which serves as the entry point. During the build process, the TypeScript files in each directory are compiled and placed in the corresponding directory under `public/`. The build system uses **Webpack** to bundle the files, after which it deletes any temporary files, leaving only the `main.js` file.

For example, if you create a directory named `app` in `scripts/` with a `main.ts` file inside, the build process will compile the TypeScript files and place them in `public/app/`. The build system automatically matches the directory names in `scripts/` with those in `public/` to determine the destination.

#### Dynamic File System for SASS

A similar process occurs for SASS files. The `styles/page/` directory contains SASS files that are compiled separately and placed in the corresponding directories under `public/`. The build system matches the SASS file names with the destination directory names in `public/`.

### Gulp.js Commands

The following Gulp.js commands are available for building the project:

- **`clean`**: Cleans up compiled TypeScript and SASS files.
- **`clean:temp`**: Deletes temporary files generated by the `build:javascript` command.
- **`clean:scripts:temp`**: Deletes temporary directory in the `public/`.
- **`build:style`**: Compiles SASS files into CSS.
- **`build:typescript`**: Compiles TypeScript files into JavaScript.
- **`build:javascript`**: Packages and bundles the compiled JavaScript files using Webpack.
- **`build:scripts`**: Executes the commands `build:typescript`, `build:javascript`, and `clean:temp` in sequence.
- **`default`**: Builds the entire project by running all necessary build tasks.
- **`watch:build`**: Watches TypeScript and SASS files for changes and recompiles them automatically.

### NPM Scripts

To simplify the build process, several NPM scripts have been predefined. These scripts can be executed using the following commands:

- **Build the project**:
  ```sh
  npm run build
  ```

- **Watch for changes and rebuild**:
  ```sh
  npm run start
  ```

- **Clean up compiled files**:
  ```sh
  npm run clean
  ```

All the predefined scripts can be found in the `package.json` file.

## Available Pages

This section outlines the various pages available on the website and explains their respective functionalities.

### List of Pages

1. **Login**: This page allows users to log into their accounts.
2. **Sign Up**: This page enables new users to register for an account.
3. **Home (Landing Page)**: The main page of the website where available products are displayed.
4. **Product Page**: This page provides detailed information about a specific product.
5. **Product Define**: This section allows users to add new products to the website.
6. **Payment Gate**: This page is used to prepare a list of products for purchase.
7. **Profile**: On this page, users can view and update their personal information.
8. **Admin Panel**: This section is exclusively for site administrators, allowing them to manage users and products.

### Page Features

- **Profile**: In the profile section, users can view their shopping cart, modify or delete items, and update their personal information.
- **Admin Panel**: Administrators can view a list of website users. They also have the authority to delete users.

## Data Structures (Database)

This section delves into the structure of the database, detailing the tables and their respective columns.

### Overview of Tables

| Table Name            | Description                              |
|-----------------------|------------------------------------------|
| Accounts              | Stores user account credentials and metadata. |
| Products              | Contains active product listings.        |
| Carts                 | Stores individual cart items.            |

### Accounts Table

| Column         | Type     | Description                          |
|----------------|----------|--------------------------------------|
| ID             | VARCHAR  | Unique user identifier (Primary Key) |
| Username       | VARCHAR  | Login credential                     |
| Password       | VARCHAR  | Hashed authentication token          |
| Name           | VARCHAR  | Full name                            |
| PhoneNumber    | VARCHAR  | Contact information                  |
| ZipCode        | VARCHAR  | Location data                        |
| Address        | VARCHAR  | Physical address                     |
| Role           | INT      | `Normal` or `Admin`                  |
| Status         | INT      | `Ok` or `Ban`                        |
| BanMessage     | VARCHAR  | Reason for account suspension        |
| Date           | DATE     | Account creation date                |

### Products Table

| Column         | Type     | Description                          |
|----------------|----------|--------------------------------------|
| ID             | VARCHAR  | Product identifier (Primary Key)     |
| Owner          | VARCHAR  | Account ID (Foreign Key)             |
| Name           | VARCHAR  | Product title                        |
| Description    | VARCHAR  | Detailed product information         |
| Price          | DECIMAL  | Price of the product                 |
| Count          | INT      | Inventory quantity                   |
| Image          | VARCHAR  | Product image                        |
| Status         | INT      | `Ok` or `Ban`                        |
| BanMessage     | VARCHAR  | Product removal reason               |

### Carts Table

| Column         | Type     | Description                          |
|----------------|----------|--------------------------------------|
| ID             | VARCHAR  | Entry identifier (Primary Key)       |
| CartID         | VARCHAR  | CartsCategory reference (Foreign Key)|
| ProductID      | VARCHAR  | Product reference (Foreign Key)      |
| Owner          | VARCHAR  | Account reference (Foreign Key)      |

## Core Functionality Workflows

### Account Creation

1. Generate a unique ID for the `ID` field.
2. Store the password using a secure hashing algorithm.
3. Set the default role to `Normal` and status to `Ok`.
4. Insert a new record into the `Accounts` table.

### Product Management

#### Adding a Product

1. Verify user authentication.
2. Insert a new record into the `Products` table with the following fields:
   - `Owner`: The current user's `Account.ID`.
   - `Status`: Set to `Ok`.
   - `Count`: Initial inventory quantity.

#### Removing a Product

1. Delete the record from the `Products` table.
